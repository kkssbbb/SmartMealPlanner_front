{"ast":null,"code":"import { mockProducts } from '../data/mockProducts';\n\n// ğŸ³ ë§Œê°œì˜ ë ˆì‹œí”¼ ì›ë³¸ ë°ì´í„° êµ¬ì¡°\n\n// ğŸ§® AI ê¸°ë°˜ ì˜ì–‘ì†Œ ê³„ì‚°ê¸°\nclass NutritionCalculator {\n  constructor() {\n    // ê¸°ë³¸ ì˜ì–‘ ë°ì´í„°ë² ì´ìŠ¤ (ë†ì§„ì²­ ê¸°ì¤€)\n    this.nutritionDB = {\n      // ğŸ¥š ë‹¨ë°±ì§ˆë¥˜\n      'ê³„ë€': {\n        calories: 155,\n        protein: 12.6,\n        carb: 1.1,\n        fat: 11.1,\n        per100g: true\n      },\n      'ë¹„ì—”ë‚˜': {\n        calories: 315,\n        protein: 12.0,\n        carb: 2.0,\n        fat: 28.5,\n        per100g: true\n      },\n      'í›ˆì œì—°ì–´': {\n        calories: 117,\n        protein: 25.4,\n        carb: 0,\n        fat: 4.3,\n        per100g: true\n      },\n      'ìš°ì‚¼ê²¹': {\n        calories: 331,\n        protein: 15.0,\n        carb: 0,\n        fat: 30.0,\n        per100g: true\n      },\n      // ğŸ¥¬ ì±„ì†Œë¥˜\n      'ì•Œë°°ê¸°ë°°ì¶”': {\n        calories: 14,\n        protein: 1.3,\n        carb: 2.8,\n        fat: 0.1,\n        per100g: true\n      },\n      'ë‹¹ê·¼': {\n        calories: 37,\n        protein: 0.8,\n        carb: 8.8,\n        fat: 0.2,\n        per100g: true\n      },\n      'ë§ˆëŠ˜': {\n        calories: 130,\n        protein: 6.2,\n        carb: 28.4,\n        fat: 0.3,\n        per100g: true\n      },\n      'ëŒ€íŒŒ': {\n        calories: 27,\n        protein: 1.4,\n        carb: 6.2,\n        fat: 0.1,\n        per100g: true\n      },\n      'ì–‘íŒŒ': {\n        calories: 37,\n        protein: 1.0,\n        carb: 8.9,\n        fat: 0.1,\n        per100g: true\n      },\n      'ì•„ë³´ì¹´ë„': {\n        calories: 190,\n        protein: 2.0,\n        carb: 8.6,\n        fat: 19.5,\n        per100g: true\n      },\n      'ìˆ™ì£¼': {\n        calories: 13,\n        protein: 1.4,\n        carb: 2.1,\n        fat: 0.1,\n        per100g: true\n      },\n      'ê¹»ì': {\n        calories: 41,\n        protein: 3.9,\n        carb: 7.1,\n        fat: 0.7,\n        per100g: true\n      },\n      // ğŸš ê³¡ë¬¼ë¥˜\n      'ë°¥': {\n        calories: 130,\n        protein: 2.5,\n        carb: 29.0,\n        fat: 0.3,\n        per100g: true\n      },\n      'ë–¡ë³¶ì´ë–¡': {\n        calories: 124,\n        protein: 2.6,\n        carb: 28.0,\n        fat: 0.4,\n        per100g: true\n      },\n      // ğŸ§„ ì¡°ë¯¸ë£Œë¥˜\n      'ì†Œê¸ˆ': {\n        calories: 0,\n        protein: 0,\n        carb: 0,\n        fat: 0,\n        per100g: true\n      },\n      'ê°„ì¥': {\n        calories: 53,\n        protein: 8.9,\n        carb: 4.6,\n        fat: 0.1,\n        per100g: true\n      },\n      'ì„¤íƒ•': {\n        calories: 387,\n        protein: 0,\n        carb: 99.8,\n        fat: 0,\n        per100g: true\n      },\n      'ì°¸ê¸°ë¦„': {\n        calories: 900,\n        protein: 0,\n        carb: 0,\n        fat: 100,\n        per100g: true\n      },\n      'ë§ˆìš”ë„¤ì¦ˆ': {\n        calories: 680,\n        protein: 1.1,\n        carb: 2.9,\n        fat: 75.3,\n        per100g: true\n      },\n      'ë•…ì½©ë²„í„°': {\n        calories: 588,\n        protein: 22.5,\n        carb: 22.3,\n        fat: 49.9,\n        per100g: true\n      }\n    };\n  }\n  // ë‹¨ìœ„ ë³€í™˜ê¸°\n  convertToGrams(quantity, unit, ingredientName) {\n    const conversions = {\n      'g': 1,\n      'kg': 1000,\n      'ml': 1,\n      // ë¬¼ ê¸°ì¤€ 1ml = 1g\n      'ê°œ': this.getItemWeight(ingredientName),\n      'ì¥': this.getSheetWeight(ingredientName),\n      'í†µ': this.getWholeWeight(ingredientName),\n      'ê³µê¸°': 150,\n      // ë°¥ 1ê³µê¸°\n      'ë´‰': this.getPackageWeight(ingredientName),\n      'ë‹¨': this.getBunchWeight(ingredientName),\n      'T': 15,\n      // í°ìˆ \n      't': 5,\n      // ì‘ì€ìˆ \n      'í°ìˆ ': 15,\n      'ì‘ì€ìˆ ': 5,\n      'ìŠ¤í‘¼': 15\n    };\n    return quantity * (conversions[unit] || 50); // ê¸°ë³¸ê°’ 50g\n  }\n  getItemWeight(ingredientName) {\n    const weights = {\n      'ê³„ë€': 50,\n      // ê³„ë€ 1ê°œ = 50g\n      'ë§ˆëŠ˜': 5,\n      // ë§ˆëŠ˜ 1ê°œ = 5g  \n      'ì–‘íŒŒ': 200,\n      // ì–‘íŒŒ 1ê°œ = 200g\n      'ê°ì': 150,\n      // ê°ì 1ê°œ = 150g\n      'ë‹¹ê·¼': 100 // ë‹¹ê·¼ 1ê°œ = 100g\n    };\n    return weights[ingredientName] || 50;\n  }\n  getSheetWeight(ingredientName) {\n    const weights = {\n      'ì‚¬ê°ì–´ë¬µ': 25,\n      // ì–´ë¬µ 1ì¥ = 25g\n      'ì•Œë°°ì¶”ì': 30,\n      // ë°°ì¶”ì 1ì¥ = 30g\n      'ê¹»ì': 1 // ê¹»ì 1ì¥ = 1g\n    };\n    return weights[ingredientName] || 20;\n  }\n  getWholeWeight(ingredientName) {\n    const weights = {\n      'ì•Œë°°ê¸°ë°°ì¶”': 1500 // ë°°ì¶” 1í†µ = 1.5kg\n    };\n    return weights[ingredientName] || 500;\n  }\n  getPackageWeight(ingredientName) {\n    const weights = {\n      'ìˆ™ì£¼': 200,\n      // ìˆ™ì£¼ 1ë´‰ = 200g\n      'íŒ½ì´ë²„ì„¯': 150 // íŒ½ì´ë²„ì„¯ 1ë´‰ = 150g\n    };\n    return weights[ingredientName] || 100;\n  }\n  getBunchWeight(ingredientName) {\n    const weights = {\n      'ëŒ€íŒŒ': 100,\n      // ëŒ€íŒŒ 1ë‹¨ = 100g\n      'ì–¼ê°ˆì´': 300 // ì–¼ê°ˆì´ 1ë‹¨ = 300g\n    };\n    return weights[ingredientName] || 100;\n  }\n\n  // ì˜ì–‘ì†Œ ê³„ì‚°\n  calculateNutrition(ingredients) {\n    let totalNutrition = {\n      calories: 0,\n      protein: 0,\n      carb: 0,\n      fat: 0\n    };\n    ingredients.forEach(ingredient => {\n      const baseNutrition = this.nutritionDB[ingredient.name];\n      if (baseNutrition) {\n        const gramsUsed = this.convertToGrams(ingredient.quantity, ingredient.unit, ingredient.name);\n        const ratio = gramsUsed / 100; // 100g ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°\n\n        totalNutrition.calories += baseNutrition.calories * ratio;\n        totalNutrition.protein += baseNutrition.protein * ratio;\n        totalNutrition.carb += baseNutrition.carb * ratio;\n        totalNutrition.fat += baseNutrition.fat * ratio;\n      }\n    });\n    return {\n      calories: Math.round(totalNutrition.calories),\n      protein: Math.round(totalNutrition.protein * 10) / 10,\n      carb: Math.round(totalNutrition.carb * 10) / 10,\n      fat: Math.round(totalNutrition.fat * 10) / 10\n    };\n  }\n}\n\n// ğŸ¤– AI ê¸°ë°˜ ëª©í‘œ ë¶„ë¥˜ê¸°\nclass GoalClassifier {\n  classifyRecipeGoals(ingredients, cookingMethod, mealPurpose, description, nutrition) {\n    const goals = [];\n\n    // ğŸ”¥ ë‹¤ì´ì–´íŠ¸ ë¶„ë¥˜ ë¡œì§ (ìŠ¤ë§ˆíŠ¸ ë¶„ë¥˜)\n    const isLowCalorie = nutrition.calories < 400;\n\n    // ì±„ì†Œ ê¸°ë°˜ ì¬ë£Œ í™•ì¸ (ë” í¬ê´„ì )\n    const vegetableKeywords = ['ë°°ì¶”', 'ìˆ™ì£¼', 'ê¹»ì', 'ë¸Œë¡œì½œë¦¬', 'ì–‘ë°°ì¶”', 'ìƒëŸ¬ë“œ', 'ì•¼ì±„', 'ì±„ì†Œ', 'ë¬´', 'ë‹¹ê·¼', 'ì‹œê¸ˆì¹˜', 'ë²„ì„¯', 'ì½©ë‚˜ë¬¼'];\n    const isVegetableBased = ingredients.some(ing => {\n      const ingName = ing.name.toLowerCase();\n      return vegetableKeywords.some(veg => ingName.includes(veg));\n    });\n\n    // ë‹¤ì´ì–´íŠ¸ ì¹œí™”ì  ì¡°ë¦¬ë²•\n    const lightCookingMethods = ['ì°Œê¸°', 'ì‚¶ê¸°', 'ë¬´ì¹¨'];\n    const isLightCooking = lightCookingMethods.includes(cookingMethod);\n\n    // êµ­ë¬¼ ìš”ë¦¬ (í¬ë§Œê° ë†’ê³  ì¹¼ë¡œë¦¬ ë‚®ìŒ)\n    const isSoupBased = cookingMethod === 'êµ­/íƒ•' || description.includes('êµ­') || description.includes('íƒ•');\n\n    // ë‹¤ì´ì–´íŠ¸ í‚¤ì›Œë“œ (ê¸°ì¡´ + ì¶”ê°€)\n    const dietKeywords = ['ë‹¤ì´ì–´íŠ¸', 'ì €ì¹¼ë¡œë¦¬', 'ì‚´ë¹¼ê¸°', 'í—¬ì‹œ', 'ê±´ê°•'];\n    const hasDietKeyword = dietKeywords.some(keyword => description.toLowerCase().includes(keyword));\n\n    // ë‹¤ì´ì–´íŠ¸ ë ˆì‹œí”¼ íŒì • (ë” ê´€ëŒ€í•˜ê²Œ)\n    if (isLowCalorie || isVegetableBased || isLightCooking || isSoupBased || hasDietKeyword) {\n      goals.push('weight_loss');\n    }\n\n    // ğŸ’ª ê·¼ì„±ì¥ ë¶„ë¥˜ ë¡œì§ (ìŠ¤ë§ˆíŠ¸ ë¶„ë¥˜)\n    const isHighProtein = nutrition.protein > 20;\n\n    // ë‹¨ë°±ì§ˆ ì¬ë£Œ í™•ì¸ (ë” í¬ê´„ì )\n    const proteinKeywords = ['ê³„ë€', 'ë‹¬ê±€', 'ë‹­', 'ì†Œê³ ê¸°', 'ë¼ì§€', 'ì—°ì–´', 'ì°¸ì¹˜', 'ë‘ë¶€', 'ìƒˆìš°', 'ì¡°ê°œ', 'ìƒì„ ', 'ìœ¡'];\n    const hasProteinSource = ingredients.some(ing => {\n      const ingName = ing.name.toLowerCase();\n      return proteinKeywords.some(protein => ingName.includes(protein));\n    });\n\n    // ê³ ë‹¨ë°± ì¡°ë¦¬ë²•\n    const proteinCookingMethods = ['êµ½ê¸°', 'ë³¶ê¸°', 'íŠ€ê¸°ê¸°'];\n    const isProteinCooking = proteinCookingMethods.includes(cookingMethod);\n\n    // ê·¼ì„±ì¥ í‚¤ì›Œë“œ\n    const muscleKeywords = ['ë‹¨ë°±ì§ˆ', 'ê·¼ìœ¡', 'ê³ ë‹¨ë°±', 'í”„ë¡œí‹´'];\n    const hasMuscleKeyword = muscleKeywords.some(keyword => description.toLowerCase().includes(keyword));\n\n    // ê·¼ì„±ì¥ ë ˆì‹œí”¼ íŒì •\n    if (isHighProtein || hasProteinSource || isProteinCooking || hasMuscleKeyword) {\n      goals.push('muscle_gain');\n    }\n\n    // ğŸ¥˜ ê· í˜• ì¡íŒ ì‹ë‹¨ (maintenance) - ëª¨ë“  ë ˆì‹œí”¼ê°€ ìµœì†Œ í•˜ë‚˜ì˜ ëª©í‘œë¥¼ ê°€ì§€ë„ë¡\n    if (goals.length === 0 || cookingMethod === 'êµ­/íƒ•' || mealPurpose === 'ì¼ìƒ') {\n      goals.push('maintenance');\n    }\n    return goals;\n  }\n}\n\n// ğŸ›’ ì¿ íŒ¡ ìƒí’ˆ ë§¤ì¹­ê¸°\nclass CoupangProductMatcher {\n  findMatchingProduct(ingredientName) {\n    // ì¬ë£Œëª… â†’ ì¿ íŒ¡ ìƒí’ˆ ë§¤í•‘ í…Œì´ë¸”\n    const productMapping = {\n      'ê³„ë€': 'prod-whole-egg-1',\n      'ë‹¹ê·¼': 'prod-carrot-1',\n      'ì•Œë°°ê¸°ë°°ì¶”': 'prod-cabbage-1',\n      'ì•„ë³´ì¹´ë„': 'prod-avocado-1',\n      'í›ˆì œì—°ì–´': 'prod-salmon-1'\n      // ë” ë§ì€ ë§¤í•‘ ì¶”ê°€ ê°€ëŠ¥\n    };\n    const productId = productMapping[ingredientName];\n    if (productId) {\n      return mockProducts.find(p => p.id === productId) || null;\n    }\n\n    // ë¶€ë¶„ ë§¤ì¹˜ ë¡œì§\n    const partialMatch = mockProducts.find(product => product.name.includes(ingredientName) || ingredientName.includes(product.name.split(' ')[0]));\n    return partialMatch || null;\n  }\n  matchIngredients(ingredients) {\n    return ingredients.map(ingredient => {\n      const product = this.findMatchingProduct(ingredient.name);\n      return {\n        product: product || this.createFallbackProduct(ingredient.name),\n        quantity: ingredient.quantity,\n        unit: ingredient.unit,\n        isOptional: false\n      };\n    });\n  }\n  createFallbackProduct(ingredientName) {\n    // ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ì¬ë£Œì— ëŒ€í•œ ê¸°ë³¸ ìƒí’ˆ ìƒì„±\n    return {\n      id: `fallback-${ingredientName}`,\n      name: `${ingredientName} (ì¿ íŒ¡)`,\n      price: 3000,\n      // ê¸°ë³¸ ê°€ê²©\n      imageUrl: 'https://via.placeholder.com/200x200?text=' + encodeURIComponent(ingredientName),\n      coupangUrl: 'https://www.coupang.com/search?q=' + encodeURIComponent(ingredientName),\n      category: 'ì‹ì¬ë£Œ',\n      nutrition: {\n        calories: 50,\n        carb: 10,\n        protein: 2,\n        fat: 1,\n        sodium: 100,\n        sugar: 0\n      },\n      description: `${ingredientName} ìƒí’ˆ`,\n      brand: 'ì¼ë°˜',\n      weight: '1ê°œ',\n      rating: 4.0,\n      reviewCount: 100,\n      isRocketDelivery: false\n    };\n  }\n}\n\n// ğŸ¯ ë©”ì¸ ë³€í™˜ê¸° í´ë˜ìŠ¤\nexport class MankaeRecipeProcessor {\n  constructor() {\n    this.nutritionCalculator = new NutritionCalculator();\n    this.goalClassifier = new GoalClassifier();\n    this.productMatcher = new CoupangProductMatcher();\n  }\n  // ì¬ë£Œ ë¬¸ìì—´ íŒŒì‹± (ì‹¤ì œ CSV í˜•ì‹ì— ë§ì¶˜ ì™„ì „ ê°œì„  ë²„ì „)\n  parseIngredients(ingredientText) {\n    const ingredients = [];\n    console.log(`ğŸ§ª ì¬ë£Œ íŒŒì‹± ì‹œì‘: \"${ingredientText.substring(0, 100)}...\"`);\n    if (!ingredientText || ingredientText.trim() === '') {\n      console.log(`âš ï¸ ì¬ë£Œ í…ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆìŒ`);\n      return ingredients;\n    }\n\n    // ì‹¤ì œ CSV í˜•ì‹ ì²˜ë¦¬: \"[ì¬ë£Œ] ë–¡êµ­ë–¡400g| ë‹¤ì§„ì†Œê³ ê¸°100g| ...\"\n    const sections = ingredientText.split(/\\[ì¬ë£Œ\\]|\\[ì–‘ë…\\]|\\[ì†ŒìŠ¤\\]|\\[ìœ¡ìˆ˜\\]|\\[ê°„ì¥ì–‘ë…\\]|\\[ì–‘ë…ì¥\\]|\\[ì–¼ê°ˆì´ë°ì¹ ë•Œ\\]|\\[ë§Œë‘ì „ê³¨ ìœ¡ìˆ˜\\]|\\[ì „ê³¨ìš”ë¦¬ ì–‘ë…ì¥\\]/);\n    sections.forEach((section, sectionIndex) => {\n      if (!section.trim()) return;\n      console.log(`ğŸ” ì„¹ì…˜ ${sectionIndex}: \"${section.substring(0, 50)}...\"`);\n      const items = section.split('|').filter(item => item.trim());\n      console.log(`ğŸ“ ì•„ì´í…œ ê°œìˆ˜: ${items.length}`);\n      items.forEach((item, itemIndex) => {\n        const trimmed = item.trim();\n        if (!trimmed || trimmed === 'ì•½ê°„' || trimmed.length < 2) return;\n        console.log(`ğŸ” ì•„ì´í…œ ${itemIndex}: \"${trimmed}\"`);\n        let match = null;\n\n        // ğŸ”¥ ì‹¤ì œ CSV ë°ì´í„° íŒ¨í„´ì— ì™„ë²½í•˜ê²Œ ë§ì¶˜ ì •ê·œì‹ë“¤\n\n        // 1. \"ë¼ì§€ê³ ê¸°ìˆ˜ìœ¡ìš©ì‚¼ê²¹ì‚´500g\" í˜•íƒœ (ê³µë°± ì—†ëŠ” ê¸´ ì´ë¦„ + ìˆ«ì + í•œê¸€ë‹¨ìœ„)\n        match = trimmed.match(/^(.+[ê°€-í£])(\\d+(?:\\/\\d+)?(?:\\.\\d+)?)([ê°€-í£]+)$/);\n\n        // 2. \"ë©¸ì¹˜ìœ¡ìˆ˜800ml\" í˜•íƒœ (ê³µë°± ì—†ëŠ” ì´ë¦„ + ìˆ«ì + ì˜ì–´ë‹¨ìœ„)\n        if (!match) {\n          match = trimmed.match(/^(.+[ê°€-í£])(\\d+(?:\\/\\d+)?(?:\\.\\d+)?)([a-zA-Z]+)$/);\n        }\n\n        // 3. \"ë¼ì§€ê³ ê¸° ìˆ˜ìœ¡ìš©ì‚¼ê²¹ì‚´500g\" í˜•íƒœ (ê³µë°± í¬í•¨ ê¸´ ì´ë¦„ + ìˆ«ì + í•œê¸€ë‹¨ìœ„)\n        if (!match) {\n          match = trimmed.match(/^(.+?)\\s+(\\d+(?:\\/\\d+)?(?:\\.\\d+)?)([ê°€-í£]+)$/);\n        }\n\n        // 4. \"ëœì¥1.5í°ìˆ \" í˜•íƒœ (ì†Œìˆ˜ì  + í•œê¸€ë‹¨ìœ„)\n        if (!match) {\n          match = trimmed.match(/^(.+?)(\\d+(?:\\.\\d+)?)([ê°€-í£]+)$/);\n        }\n\n        // 5. \"ëŒ€íŒŒ1/3ëŒ€\" í˜•íƒœ (ë¶„ìˆ˜ + í•œê¸€ë‹¨ìœ„)\n        if (!match) {\n          match = trimmed.match(/^(.+?)(\\d+\\/\\d+)([ê°€-í£]+)$/);\n        }\n\n        // 6. \"ì°¸ê¸°ë¦„1T\" í˜•íƒœ (ì˜ì–´ ë‹¨ìœ„)\n        if (!match) {\n          match = trimmed.match(/^(.+?)(\\d+(?:\\/\\d+)?(?:\\.\\d+)?)([TtLl])$/);\n        }\n\n        // 7. \"ì†Œê¸ˆ\" í˜•íƒœ (ì´ë¦„ë§Œ, ìˆ˜ëŸ‰ 1ë¡œ ì„¤ì •)\n        if (!match && trimmed.length > 1 && !trimmed.includes('ì•½ê°„')) {\n          match = [trimmed, trimmed, '1', 'ê°œ'];\n        }\n        if (match) {\n          const [, name, quantityStr, unit] = match;\n          let quantity = parseFloat(quantityStr);\n\n          // ë¶„ìˆ˜ ì²˜ë¦¬ (1/3 â†’ 0.333)\n          if (quantityStr.includes('/')) {\n            const [numerator, denominator] = quantityStr.split('/').map(Number);\n            quantity = numerator / denominator;\n          }\n          const ingredient = {\n            name: name.trim(),\n            quantity,\n            unit: unit.trim()\n          };\n          ingredients.push(ingredient);\n          console.log(`âœ… ì¬ë£Œ ì¶”ê°€: ${ingredient.name} ${ingredient.quantity}${ingredient.unit}`);\n        } else {\n          console.log(`âŒ ë§¤ì¹­ ì‹¤íŒ¨: \"${trimmed}\"`);\n\n          // ì‹¤íŒ¨í•œ ê²½ìš°ë¼ë„ ìœ íš¨í•œ ì¬ë£Œëª… ì¶”ì¶œ ì‹œë„\n          // ìˆ«ìì™€ ë‹¨ìœ„ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ë¥¼ ì¬ë£Œëª…ìœ¼ë¡œ ê°„ì£¼\n          const nameOnlyMatch = trimmed.match(/^(.+?)(?:\\d|\\s*$)/);\n          if (nameOnlyMatch && nameOnlyMatch[1].trim().length > 1 && !trimmed.includes('ì•½ê°„') && !trimmed.includes('ì ë‹¹íˆ')) {\n            const fallbackIngredient = {\n              name: nameOnlyMatch[1].trim(),\n              quantity: 1,\n              unit: 'ê°œ'\n            };\n            ingredients.push(fallbackIngredient);\n            console.log(`ğŸ”„ í´ë°± ì¬ë£Œ ì¶”ê°€: ${fallbackIngredient.name} ${fallbackIngredient.quantity}${fallbackIngredient.unit}`);\n          }\n        }\n      });\n    });\n    console.log(`ğŸ“‹ ìµœì¢… ì¬ë£Œ ê°œìˆ˜: ${ingredients.length}`);\n    return ingredients;\n  }\n\n  // ì¡°ë¦¬ì‹œê°„ ë³€í™˜\n  parseTime(timeStr) {\n    // null/undefined ì²´í¬ ì¶”ê°€\n    if (!timeStr || typeof timeStr !== 'string') {\n      console.log('âš ï¸ ì¡°ë¦¬ì‹œê°„ ì •ë³´ê°€ ì—†ìŒ, ê¸°ë³¸ê°’ 30ë¶„ ì‚¬ìš©');\n      return 30; // ê¸°ë³¸ê°’ 30ë¶„\n    }\n    if (timeStr.includes('ì‹œê°„')) {\n      const hours = parseInt(timeStr) || 1;\n      return hours * 60;\n    }\n    const minutes = parseInt(timeStr) || 15;\n    return minutes;\n  }\n\n  // ğŸ§ª íŒŒì‹± í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ (ì„ì‹œ ë””ë²„ê¹…ìš©)\n  testParseIngredients(ingredientText) {\n    console.log('ğŸ§ª íŒŒì‹± í…ŒìŠ¤íŠ¸ ì‹œì‘:', ingredientText);\n    return this.parseIngredients(ingredientText);\n  }\n\n  // ğŸ”¥ ê¸´ê¸‰ ë””ë²„ê¹…: ì‹¤ì œ CSV ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸\n  debugRealDataParsing() {\n    const testData = [\"[ì¬ë£Œ] ë–¡êµ­ë–¡400g| ë‹¤ì§„ì†Œê³ ê¸°100g| ë©¸ì¹˜ìœ¡ìˆ˜800ml| ëŒ€íŒŒ1/3ëŒ€| ê³„ë€2ê°œ| ì°¸ê¸°ë¦„1T| êµ­ê°„ì¥1T\", \"[ì¬ë£Œ] ë¼ì§€ê³ ê¸° ìˆ˜ìœ¡ìš©ì‚¼ê²¹ì‚´500g| ëœì¥1.5í°ìˆ | ìˆ 4í°ìˆ | í™ì–´ë¬´ì¹¨| ë¬´ìƒì±„| ì½©ë‚˜ë¬¼ë¬´ì¹¨\", \"[ì¬ë£Œ] ë°°ì¶”3ì¥| ì–‘íŒŒ1/2ê°œ| ëŒ€íŒŒ1ëŒ€| ì²­ì–‘ê³ ì¶”2ê°œ\"];\n    testData.forEach((data, index) => {\n      console.log(`\\nğŸ§ª í…ŒìŠ¤íŠ¸ ${index + 1}: ${data}`);\n      const result = this.parseIngredients(data);\n      console.log(`ğŸ“‹ ê²°ê³¼: ${result.length}ê°œ ì¬ë£Œ íŒŒì‹±ë¨`);\n      result.forEach((ing, i) => {\n        console.log(`   ${i + 1}. ${ing.name}: ${ing.quantity}${ing.unit}`);\n      });\n    });\n  }\n\n  // ì¸ë¶„ìˆ˜ ë³€í™˜\n  parseServings(servingStr) {\n    if (!servingStr || typeof servingStr !== 'string') {\n      return 2; // ê¸°ë³¸ê°’ 2ì¸ë¶„\n    }\n    const match = servingStr.match(/(\\d+)/);\n    return match ? parseInt(match[1]) : 2;\n  }\n\n  // ë‚œì´ë„ ë³€í™˜\n  parseDifficulty(difficultyStr) {\n    // null/undefined ì²´í¬ ì¶”ê°€\n    if (!difficultyStr || typeof difficultyStr !== 'string') {\n      console.log('âš ï¸ ë‚œì´ë„ ì •ë³´ê°€ ì—†ìŒ, ê¸°ë³¸ê°’ medium ì‚¬ìš©');\n      return 'medium'; // ê¸°ë³¸ê°’ medium\n    }\n    if (difficultyStr.includes('ì´ˆê¸‰') || difficultyStr.includes('ì•„ë¬´ë‚˜')) return 'easy';\n    if (difficultyStr.includes('ì¤‘ê¸‰')) return 'medium';\n    return 'hard';\n  }\n\n  // ì‹ì‚¬ íƒ€ì… ì¶”ë¡ \n  inferMealType(title, category, mealPurpose) {\n    // null/undefined ì²´í¬\n    const safeTitle = title || '';\n    const safeCategory = category || '';\n    const safeMealPurpose = mealPurpose || '';\n    const titleLower = safeTitle.toLowerCase();\n    if (titleLower.includes('ì•„ì¹¨') || safeMealPurpose === 'ì•„ì¹¨ëŒ€ìš©') return 'breakfast';\n    if (titleLower.includes('ì ì‹¬')) return 'lunch';\n    if (titleLower.includes('ì €ë…') || safeMealPurpose === 'ìˆ ì•ˆì£¼') return 'dinner';\n    if (safeCategory === 'ì–‘ë…/ì†ŒìŠ¤/ì¼' || safeMealPurpose === 'ê°„ì‹') return 'snack';\n\n    // ê¸°ë³¸ê°’: ìš”ë¦¬ ì¢…ë¥˜ì— ë”°ë¼ ê²°ì •\n    if (safeCategory === 'êµ­/íƒ•') return 'dinner';\n    if (safeCategory === 'ë°‘ë°˜ì°¬') return 'lunch';\n    return 'lunch'; // ê¸°ë³¸ê°’\n  }\n\n  // í’ˆì§ˆ ì ìˆ˜ ê³„ì‚°\n  calculateQualityScore(views, scraps) {\n    // ì¡°íšŒìˆ˜ ê¸°ë°˜ ì ìˆ˜ (ìµœëŒ€ 5.0)\n    const viewScore = Math.min(views / 200 * 5, 5.0);\n\n    // ìŠ¤í¬ë©ìœ¨ ê¸°ë°˜ ì ìˆ˜ (ìµœëŒ€ 5.0)\n    const engagementRate = views > 0 ? scraps / views * 100 : 0;\n    const engagementScore = Math.min(engagementRate * 50, 5.0);\n\n    // ì „ì²´ ì ìˆ˜ (ì¡°íšŒìˆ˜ 70% + ìŠ¤í¬ë©ìœ¨ 30%)\n    const overall = viewScore * 0.7 + engagementScore * 0.3;\n    return {\n      overall: Math.round(overall * 10) / 10,\n      taste: Math.min(overall + 0.2, 5.0),\n      difficulty: Math.min(overall + 0.1, 5.0),\n      nutrition: Math.min(overall - 0.1, 5.0),\n      reviewCount: views\n    };\n  }\n\n  // ğŸ¯ ë©”ì¸ ë³€í™˜ í•¨ìˆ˜ (ì„±ëŠ¥ ìµœì í™”)\n  processRecipe(rawData) {\n    var _rawData$CKG_MTRL_CN;\n    // ğŸ”¥ ê¸´ê¸‰ ë””ë²„ê¹…: ëª¨ë“  ë ˆì‹œí”¼ ì²˜ë¦¬ ê³¼ì • ì¶”ì \n    console.log(`ğŸ”„ ë ˆì‹œí”¼ ì²˜ë¦¬ ì‹œì‘: ${rawData.RCP_TTL}`);\n    console.log(`   - ì›ë³¸ ì¬ë£Œ ë°ì´í„°: \"${(_rawData$CKG_MTRL_CN = rawData.CKG_MTRL_CN) === null || _rawData$CKG_MTRL_CN === void 0 ? void 0 : _rawData$CKG_MTRL_CN.substring(0, 100)}...\"`);\n\n    // 1ë‹¨ê³„: ì¬ë£Œ íŒŒì‹±\n    const ingredients = this.parseIngredients(rawData.CKG_MTRL_CN || '');\n    console.log(`   - íŒŒì‹±ëœ ì¬ë£Œ ìˆ˜: ${ingredients.length}ê°œ`);\n    if (ingredients.length > 0) {\n      console.log(`   - ìƒ˜í”Œ ì¬ë£Œ: ${ingredients.slice(0, 3).map(i => `${i.name}(${i.quantity}${i.unit})`).join(', ')}`);\n    }\n\n    // 2ë‹¨ê³„: ì˜ì–‘ì†Œ ê³„ì‚° (ìºì‹œ í™œìš©)\n    const nutrition = this.nutritionCalculator.calculateNutrition(ingredients);\n    console.log(`   - ê³„ì‚°ëœ ì˜ì–‘ì†Œ: ${nutrition.calories}kcal, ${nutrition.protein}g ë‹¨ë°±ì§ˆ`);\n\n    // 3ë‹¨ê³„: ëª©í‘œ ë¶„ë¥˜ (ìµœì í™”ëœ ì•Œê³ ë¦¬ì¦˜)\n    const goalFit = this.goalClassifier.classifyRecipeGoals(ingredients, rawData.CKG_MTH_ACTO_NM || '', rawData.CKG_STA_ACTO_NM || '', rawData.CKG_IPDC || '', nutrition);\n    console.log(`   - ë¶„ë¥˜ëœ ëª©í‘œ: [${goalFit.join(', ')}]`);\n    console.log('---');\n\n    // 4ë‹¨ê³„: í’ˆì§ˆ í‰ê°€\n    const userRatings = this.calculateQualityScore(rawData.INQ_CNT || 0, rawData.SRAP_CNT || 0);\n\n    // 5ë‹¨ê³„: Recipe ê°ì²´ ìƒì„±\n    const recipe = {\n      id: `mankae-${rawData.RCP_SNO}`,\n      name: rawData.CKG_NM || 'ì œëª© ì—†ìŒ',\n      description: rawData.CKG_IPDC || 'ì„¤ëª… ì—†ìŒ',\n      image: rawData.RCP_IMG_URL || `https://images.unsplash.com/photo-1546833999-b9f581a1996d?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3`,\n      // ì‹¤ì œ ì´ë¯¸ì§€ ë˜ëŠ” ê¸°ë³¸ ì´ë¯¸ì§€\n      cookingTime: this.parseTime(rawData.CKG_TIME_NM || ''),\n      difficulty: this.parseDifficulty(rawData.CKG_DODF_NM || ''),\n      instructions: this.generateInstructions(rawData.CKG_MTH_ACTO_NM || '', ingredients),\n      tags: this.generateTags(rawData, nutrition),\n      mealType: this.inferMealType(rawData.RCP_TTL || '', rawData.CKG_KND_ACTO_NM || '', rawData.CKG_STA_ACTO_NM || ''),\n      goalFit,\n      // í™•ì¥ ì •ë³´ (ì„ íƒì )\n      nutritionHighlights: {\n        mainBenefits: this.generateNutritionBenefits(ingredients, nutrition),\n        calorieContext: `${nutrition.calories}kcalë¡œ ê· í˜•ì¡íŒ í•œ ë¼`,\n        dietaryInfo: this.generateDietaryInfo(ingredients, nutrition)\n      },\n      userRatings,\n      sourceInfo: {\n        chef: rawData.RGTR_NM,\n        source: 'chef_recipe',\n        verified: rawData.INQ_CNT > 100,\n        // ì¡°íšŒìˆ˜ 100 ì´ìƒì´ë©´ ê²€ì¦ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼\n        lastUpdated: rawData.FIRST_REG_DT.substring(0, 8) // YYYYMMDD í˜•ì‹\n      }\n    };\n    console.log(`âœ… ë³€í™˜ ì™„ë£Œ: ${recipe.name}`);\n    return recipe;\n  }\n\n  // ì¡°ë¦¬ë²• ìƒì„±\n  generateInstructions(cookingMethod, ingredients) {\n    const baseInstructions = {\n      'ë¶€ì¹¨': ['íŒ¬ì— ê¸°ë¦„ì„ ë‘ë¥´ê³  ì¤‘ì•½ë¶ˆë¡œ ë‹¬ê¶ˆì£¼ì„¸ìš”', 'ì¬ë£Œë¥¼ ì˜¬ë¦¬ê³  ë…¸ë¦‡í•˜ê²Œ ë¶€ì³ì£¼ì„¸ìš”', 'ë’¤ì§‘ì–´ì„œ ë°˜ëŒ€ë©´ë„ ìµí˜€ì£¼ì„¸ìš”', 'ì™„ì„±ëœ ìš”ë¦¬ë¥¼ ì ‘ì‹œì— ë‹´ì•„ì£¼ì„¸ìš”'],\n      'ë³¶ìŒ': ['íŒ¬ì„ ë‹¬êµ¬ê³  ê¸°ë¦„ì„ ë‘ë¥´ì„¸ìš”', 'ì¬ë£Œë¥¼ ë„£ê³  ì„¼ ë¶ˆì—ì„œ ë¹ ë¥´ê²Œ ë³¶ì•„ì£¼ì„¸ìš”', 'ì–‘ë…ì„ ë„£ê³  ê³¨ê³ ë£¨ ì„ì–´ì£¼ì„¸ìš”', 'ë¶ˆì„ ë„ê³  ì ‘ì‹œì— ë‹´ì•„ ì™„ì„±í•˜ì„¸ìš”'],\n      'ì°œ': ['ì¬ë£Œë¥¼ ê¹¨ë—ì´ ì†ì§ˆí•˜ì—¬ ì¤€ë¹„í•˜ì„¸ìš”', 'ì°œê¸°ì— ë¬¼ì„ ë„£ê³  ë“ì—¬ì£¼ì„¸ìš”', 'ì¬ë£Œë¥¼ ì°œê¸°ì— ì˜¬ë¦¬ê³  ëšœê»‘ì„ ë®ì–´ì£¼ì„¸ìš”', 'ì¶©ë¶„íˆ ìµìœ¼ë©´ ì–‘ë…ê³¼ í•¨ê»˜ ì™„ì„±í•˜ì„¸ìš”'],\n      'ë“ì´ê¸°': ['ëƒ„ë¹„ì— ë¬¼ì„ ë„£ê³  ë“ì—¬ì£¼ì„¸ìš”', 'ì¬ë£Œë¥¼ ë„£ê³  ì¤‘ë¶ˆì—ì„œ ë“ì—¬ì£¼ì„¸ìš”', 'ê°„ì„ ë§ì¶”ê³  ë” ë“ì—¬ì£¼ì„¸ìš”', 'ê·¸ë¦‡ì— ë‹´ì•„ ëœ¨ê²ê²Œ ì™„ì„±í•˜ì„¸ìš”']\n    };\n    return baseInstructions[cookingMethod] || ['ì¬ë£Œë¥¼ ì¤€ë¹„í•˜ê³  ì†ì§ˆí•˜ì„¸ìš”', 'ì ì ˆí•œ ë°©ë²•ìœ¼ë¡œ ì¡°ë¦¬í•˜ì„¸ìš”', 'ê°„ì„ ë§ì¶”ê³  ì™„ì„±í•˜ì„¸ìš”'];\n  }\n\n  // íƒœê·¸ ìƒì„±\n  generateTags(rawData, nutrition) {\n    const tags = [];\n\n    // ì¡°ë¦¬ë²• ê¸°ë°˜ - null ì²´í¬\n    if (rawData.CKG_MTH_ACTO_NM) {\n      tags.push(rawData.CKG_MTH_ACTO_NM);\n    }\n\n    // ì˜ì–‘ ê¸°ë°˜\n    if (nutrition.protein > 15) tags.push('ê³ ë‹¨ë°±');\n    if (nutrition.calories < 200) tags.push('ì €ì¹¼ë¡œë¦¬');\n\n    // ìƒí™© ê¸°ë°˜ - null ì²´í¬\n    if (rawData.CKG_STA_ACTO_NM === 'ì´ˆìŠ¤í”¼ë“œ') tags.push('ê°„í¸');\n    if (rawData.CKG_DODF_NM === 'ì•„ë¬´ë‚˜') tags.push('ì´ˆë³´ì');\n\n    // ì‹œê°„ ê¸°ë°˜ - null ì²´í¬\n    if (rawData.CKG_TIME_NM && rawData.CKG_TIME_NM.includes('10ë¶„')) tags.push('10ë¶„ì™„ì„±');\n    if (rawData.CKG_TIME_NM && rawData.CKG_TIME_NM.includes('15ë¶„')) tags.push('15ë¶„ì™„ì„±');\n    return tags;\n  }\n\n  // ì˜ì–‘ í˜œíƒ ìƒì„±\n  generateNutritionBenefits(ingredients, nutrition) {\n    const benefits = [];\n    if (nutrition.protein > 15) {\n      benefits.push(`ê³ ë‹¨ë°±ì§ˆ(${nutrition.protein}g)ë¡œ ê·¼ìœ¡ ê±´ê°•ì— ë„ì›€`);\n    }\n    ingredients.forEach(ing => {\n      if (ing.name === 'ê³„ë€') benefits.push('ì™„ì „ë‹¨ë°±ì§ˆê³¼ ë¹„íƒ€ë¯¼ ê³µê¸‰');\n      if (ing.name === 'ë°°ì¶”') benefits.push('ì‹ì´ì„¬ìœ ì™€ ë¹„íƒ€ë¯¼C í’ë¶€');\n      if (ing.name === 'ì•„ë³´ì¹´ë„') benefits.push('ê±´ê°•í•œ ë¶ˆí¬í™”ì§€ë°©ì‚° í•¨ìœ ');\n    });\n    return benefits;\n  }\n\n  // ì‹ë‹¨ ì •ë³´ ìƒì„±\n  generateDietaryInfo(ingredients, nutrition) {\n    const info = [];\n    if (nutrition.protein > 15) info.push('ê³ ë‹¨ë°±');\n    if (nutrition.calories < 200) info.push('ì €ì¹¼ë¡œë¦¬');\n    const hasAnimalProducts = ingredients.some(ing => ['ê³„ë€', 'ìš°ì‚¼ê²¹', 'í›ˆì œì—°ì–´'].includes(ing.name));\n    if (!hasAnimalProducts) info.push('ë¹„ê±´');\n    return info;\n  }\n}","map":{"version":3,"names":["mockProducts","NutritionCalculator","constructor","nutritionDB","calories","protein","carb","fat","per100g","convertToGrams","quantity","unit","ingredientName","conversions","getItemWeight","getSheetWeight","getWholeWeight","getPackageWeight","getBunchWeight","weights","calculateNutrition","ingredients","totalNutrition","forEach","ingredient","baseNutrition","name","gramsUsed","ratio","Math","round","GoalClassifier","classifyRecipeGoals","cookingMethod","mealPurpose","description","nutrition","goals","isLowCalorie","vegetableKeywords","isVegetableBased","some","ing","ingName","toLowerCase","veg","includes","lightCookingMethods","isLightCooking","isSoupBased","dietKeywords","hasDietKeyword","keyword","push","isHighProtein","proteinKeywords","hasProteinSource","proteinCookingMethods","isProteinCooking","muscleKeywords","hasMuscleKeyword","length","CoupangProductMatcher","findMatchingProduct","productMapping","productId","find","p","id","partialMatch","product","split","matchIngredients","map","createFallbackProduct","isOptional","price","imageUrl","encodeURIComponent","coupangUrl","category","sodium","sugar","brand","weight","rating","reviewCount","isRocketDelivery","MankaeRecipeProcessor","nutritionCalculator","goalClassifier","productMatcher","parseIngredients","ingredientText","console","log","substring","trim","sections","section","sectionIndex","items","filter","item","itemIndex","trimmed","match","quantityStr","parseFloat","numerator","denominator","Number","nameOnlyMatch","fallbackIngredient","parseTime","timeStr","hours","parseInt","minutes","testParseIngredients","debugRealDataParsing","testData","data","index","result","i","parseServings","servingStr","parseDifficulty","difficultyStr","inferMealType","title","safeTitle","safeCategory","safeMealPurpose","titleLower","calculateQualityScore","views","scraps","viewScore","min","engagementRate","engagementScore","overall","taste","difficulty","processRecipe","rawData","_rawData$CKG_MTRL_CN","RCP_TTL","CKG_MTRL_CN","slice","join","goalFit","CKG_MTH_ACTO_NM","CKG_STA_ACTO_NM","CKG_IPDC","userRatings","INQ_CNT","SRAP_CNT","recipe","RCP_SNO","CKG_NM","image","RCP_IMG_URL","cookingTime","CKG_TIME_NM","CKG_DODF_NM","instructions","generateInstructions","tags","generateTags","mealType","CKG_KND_ACTO_NM","nutritionHighlights","mainBenefits","generateNutritionBenefits","calorieContext","dietaryInfo","generateDietaryInfo","sourceInfo","chef","RGTR_NM","source","verified","lastUpdated","FIRST_REG_DT","baseInstructions","benefits","info","hasAnimalProducts"],"sources":["/Users/kim_seung_bin/Desktop/ksb/public/dev/kkssbbb-github-repo/SmartMealPlanner_front/src/utils/recipeDataProcessor.ts"],"sourcesContent":["import { Recipe, CoupangProduct, RecipeIngredient } from '../types';\nimport { mockProducts } from '../data/mockProducts';\n\n// ğŸ³ ë§Œê°œì˜ ë ˆì‹œí”¼ ì›ë³¸ ë°ì´í„° êµ¬ì¡°\nexport interface MankaeLRecipeRaw {\n  RCP_SNO: string;           // ë ˆì‹œí”¼ ë²ˆí˜¸\n  RCP_TTL: string;           // ë ˆì‹œí”¼ ì œëª©\n  CKG_NM: string;            // ìš”ë¦¬ëª…\n  RGTR_ID: string;           // ë“±ë¡ì ID\n  RGTR_NM: string;           // ë“±ë¡ìëª… (ìš”ë¦¬ì‚¬)\n  INQ_CNT: number;           // ì¡°íšŒìˆ˜\n  RCMM_CNT: number;          // ì¶”ì²œìˆ˜\n  SRAP_CNT: number;          // ìŠ¤í¬ë©ìˆ˜\n  CKG_MTH_ACTO_NM: string;   // ì¡°ë¦¬ë²• (ë¶€ì¹¨, ì°œ, ë³¶ìŒ, ë“ì´ê¸°)\n  CKG_STA_ACTO_NM: string;   // ìƒí™© (ì˜ì–‘ì‹, ì¼ìƒ, ì´ˆìŠ¤í”¼ë“œ, ìˆ ì•ˆì£¼)\n  CKG_MTRL_ACTO_NM: string;  // ì£¼ì¬ë£Œ (ë‹¬ê±€/ìœ ì œí’ˆ, ì±„ì†Œë¥˜, ì†Œê³ ê¸°)\n  CKG_KND_ACTO_NM: string;   // ìš”ë¦¬ì¢…ë¥˜ (ë°‘ë°˜ì°¬, ë©”ì¸ë°˜ì°¬, êµ­/íƒ•)\n  CKG_IPDC: string;          // ìš”ë¦¬ì†Œê°œ\n  CKG_MTRL_CN: string;       // ì¬ë£Œ ì •ë³´\n  CKG_INBUN_NM: string;      // ì¸ë¶„\n  CKG_DODF_NM: string;       // ë‚œì´ë„\n  CKG_TIME_NM: string;       // ì¡°ë¦¬ì‹œê°„\n  FIRST_REG_DT: string;      // ë“±ë¡ì¼\n  RCP_IMG_URL?: string;      // ë ˆì‹œí”¼ ì´ë¯¸ì§€ URL\n}\n\n// ğŸ§® AI ê¸°ë°˜ ì˜ì–‘ì†Œ ê³„ì‚°ê¸°\nclass NutritionCalculator {\n  // ê¸°ë³¸ ì˜ì–‘ ë°ì´í„°ë² ì´ìŠ¤ (ë†ì§„ì²­ ê¸°ì¤€)\n  private nutritionDB: Record<string, { calories: number; protein: number; carb: number; fat: number; per100g: boolean }> = {\n    // ğŸ¥š ë‹¨ë°±ì§ˆë¥˜\n    'ê³„ë€': { calories: 155, protein: 12.6, carb: 1.1, fat: 11.1, per100g: true },\n    'ë¹„ì—”ë‚˜': { calories: 315, protein: 12.0, carb: 2.0, fat: 28.5, per100g: true },\n    'í›ˆì œì—°ì–´': { calories: 117, protein: 25.4, carb: 0, fat: 4.3, per100g: true },\n    'ìš°ì‚¼ê²¹': { calories: 331, protein: 15.0, carb: 0, fat: 30.0, per100g: true },\n    \n    // ğŸ¥¬ ì±„ì†Œë¥˜\n    'ì•Œë°°ê¸°ë°°ì¶”': { calories: 14, protein: 1.3, carb: 2.8, fat: 0.1, per100g: true },\n    'ë‹¹ê·¼': { calories: 37, protein: 0.8, carb: 8.8, fat: 0.2, per100g: true },\n    'ë§ˆëŠ˜': { calories: 130, protein: 6.2, carb: 28.4, fat: 0.3, per100g: true },\n    'ëŒ€íŒŒ': { calories: 27, protein: 1.4, carb: 6.2, fat: 0.1, per100g: true },\n    'ì–‘íŒŒ': { calories: 37, protein: 1.0, carb: 8.9, fat: 0.1, per100g: true },\n    'ì•„ë³´ì¹´ë„': { calories: 190, protein: 2.0, carb: 8.6, fat: 19.5, per100g: true },\n    'ìˆ™ì£¼': { calories: 13, protein: 1.4, carb: 2.1, fat: 0.1, per100g: true },\n    'ê¹»ì': { calories: 41, protein: 3.9, carb: 7.1, fat: 0.7, per100g: true },\n    \n    // ğŸš ê³¡ë¬¼ë¥˜\n    'ë°¥': { calories: 130, protein: 2.5, carb: 29.0, fat: 0.3, per100g: true },\n    'ë–¡ë³¶ì´ë–¡': { calories: 124, protein: 2.6, carb: 28.0, fat: 0.4, per100g: true },\n    \n    // ğŸ§„ ì¡°ë¯¸ë£Œë¥˜\n    'ì†Œê¸ˆ': { calories: 0, protein: 0, carb: 0, fat: 0, per100g: true },\n    'ê°„ì¥': { calories: 53, protein: 8.9, carb: 4.6, fat: 0.1, per100g: true },\n    'ì„¤íƒ•': { calories: 387, protein: 0, carb: 99.8, fat: 0, per100g: true },\n    'ì°¸ê¸°ë¦„': { calories: 900, protein: 0, carb: 0, fat: 100, per100g: true },\n    'ë§ˆìš”ë„¤ì¦ˆ': { calories: 680, protein: 1.1, carb: 2.9, fat: 75.3, per100g: true },\n    'ë•…ì½©ë²„í„°': { calories: 588, protein: 22.5, carb: 22.3, fat: 49.9, per100g: true }\n  };\n  \n  // ë‹¨ìœ„ ë³€í™˜ê¸°\n  private convertToGrams(quantity: number, unit: string, ingredientName: string): number {\n    const conversions: Record<string, number> = {\n      'g': 1,\n      'kg': 1000,\n      'ml': 1, // ë¬¼ ê¸°ì¤€ 1ml = 1g\n      'ê°œ': this.getItemWeight(ingredientName),\n      'ì¥': this.getSheetWeight(ingredientName),\n      'í†µ': this.getWholeWeight(ingredientName),\n      'ê³µê¸°': 150, // ë°¥ 1ê³µê¸°\n      'ë´‰': this.getPackageWeight(ingredientName),\n      'ë‹¨': this.getBunchWeight(ingredientName),\n      'T': 15, // í°ìˆ \n      't': 5,  // ì‘ì€ìˆ \n      'í°ìˆ ': 15,\n      'ì‘ì€ìˆ ': 5,\n      'ìŠ¤í‘¼': 15\n    };\n    \n    return quantity * (conversions[unit] || 50); // ê¸°ë³¸ê°’ 50g\n  }\n  \n  private getItemWeight(ingredientName: string): number {\n    const weights: Record<string, number> = {\n      'ê³„ë€': 50,   // ê³„ë€ 1ê°œ = 50g\n      'ë§ˆëŠ˜': 5,    // ë§ˆëŠ˜ 1ê°œ = 5g  \n      'ì–‘íŒŒ': 200,  // ì–‘íŒŒ 1ê°œ = 200g\n      'ê°ì': 150,  // ê°ì 1ê°œ = 150g\n      'ë‹¹ê·¼': 100   // ë‹¹ê·¼ 1ê°œ = 100g\n    };\n    return weights[ingredientName] || 50;\n  }\n  \n  private getSheetWeight(ingredientName: string): number {\n    const weights: Record<string, number> = {\n      'ì‚¬ê°ì–´ë¬µ': 25,  // ì–´ë¬µ 1ì¥ = 25g\n      'ì•Œë°°ì¶”ì': 30,  // ë°°ì¶”ì 1ì¥ = 30g\n      'ê¹»ì': 1        // ê¹»ì 1ì¥ = 1g\n    };\n    return weights[ingredientName] || 20;\n  }\n  \n  private getWholeWeight(ingredientName: string): number {\n    const weights: Record<string, number> = {\n      'ì•Œë°°ê¸°ë°°ì¶”': 1500  // ë°°ì¶” 1í†µ = 1.5kg\n    };\n    return weights[ingredientName] || 500;\n  }\n  \n  private getPackageWeight(ingredientName: string): number {\n    const weights: Record<string, number> = {\n      'ìˆ™ì£¼': 200,      // ìˆ™ì£¼ 1ë´‰ = 200g\n      'íŒ½ì´ë²„ì„¯': 150   // íŒ½ì´ë²„ì„¯ 1ë´‰ = 150g\n    };\n    return weights[ingredientName] || 100;\n  }\n  \n  private getBunchWeight(ingredientName: string): number {\n    const weights: Record<string, number> = {\n      'ëŒ€íŒŒ': 100,      // ëŒ€íŒŒ 1ë‹¨ = 100g\n      'ì–¼ê°ˆì´': 300     // ì–¼ê°ˆì´ 1ë‹¨ = 300g\n    };\n    return weights[ingredientName] || 100;\n  }\n  \n  // ì˜ì–‘ì†Œ ê³„ì‚°\n  calculateNutrition(ingredients: Array<{name: string; quantity: number; unit: string}>): {\n    calories: number; protein: number; carb: number; fat: number;\n  } {\n    let totalNutrition = { calories: 0, protein: 0, carb: 0, fat: 0 };\n    \n    ingredients.forEach(ingredient => {\n      const baseNutrition = this.nutritionDB[ingredient.name];\n      if (baseNutrition) {\n        const gramsUsed = this.convertToGrams(ingredient.quantity, ingredient.unit, ingredient.name);\n        const ratio = gramsUsed / 100; // 100g ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°\n        \n        totalNutrition.calories += baseNutrition.calories * ratio;\n        totalNutrition.protein += baseNutrition.protein * ratio;\n        totalNutrition.carb += baseNutrition.carb * ratio;\n        totalNutrition.fat += baseNutrition.fat * ratio;\n      }\n    });\n    \n    return {\n      calories: Math.round(totalNutrition.calories),\n      protein: Math.round(totalNutrition.protein * 10) / 10,\n      carb: Math.round(totalNutrition.carb * 10) / 10,\n      fat: Math.round(totalNutrition.fat * 10) / 10\n    };\n  }\n}\n\n// ğŸ¤– AI ê¸°ë°˜ ëª©í‘œ ë¶„ë¥˜ê¸°\nclass GoalClassifier {\n  classifyRecipeGoals(\n    ingredients: Array<{name: string; quantity: number; unit: string}>,\n    cookingMethod: string,\n    mealPurpose: string,\n    description: string,\n    nutrition: {calories: number; protein: number; carb: number; fat: number}\n  ): ('weight_loss' | 'muscle_gain' | 'maintenance')[] {\n    const goals: ('weight_loss' | 'muscle_gain' | 'maintenance')[] = [];\n    \n    // ğŸ”¥ ë‹¤ì´ì–´íŠ¸ ë¶„ë¥˜ ë¡œì§ (ìŠ¤ë§ˆíŠ¸ ë¶„ë¥˜)\n    const isLowCalorie = nutrition.calories < 400;\n    \n    // ì±„ì†Œ ê¸°ë°˜ ì¬ë£Œ í™•ì¸ (ë” í¬ê´„ì )\n    const vegetableKeywords = ['ë°°ì¶”', 'ìˆ™ì£¼', 'ê¹»ì', 'ë¸Œë¡œì½œë¦¬', 'ì–‘ë°°ì¶”', 'ìƒëŸ¬ë“œ', 'ì•¼ì±„', 'ì±„ì†Œ', 'ë¬´', 'ë‹¹ê·¼', 'ì‹œê¸ˆì¹˜', 'ë²„ì„¯', 'ì½©ë‚˜ë¬¼'];\n    const isVegetableBased = ingredients.some(ing => {\n      const ingName = ing.name.toLowerCase();\n      return vegetableKeywords.some(veg => ingName.includes(veg));\n    });\n    \n    // ë‹¤ì´ì–´íŠ¸ ì¹œí™”ì  ì¡°ë¦¬ë²•\n    const lightCookingMethods = ['ì°Œê¸°', 'ì‚¶ê¸°', 'ë¬´ì¹¨'];\n    const isLightCooking = lightCookingMethods.includes(cookingMethod);\n    \n    // êµ­ë¬¼ ìš”ë¦¬ (í¬ë§Œê° ë†’ê³  ì¹¼ë¡œë¦¬ ë‚®ìŒ)\n    const isSoupBased = cookingMethod === 'êµ­/íƒ•' || description.includes('êµ­') || description.includes('íƒ•');\n    \n    // ë‹¤ì´ì–´íŠ¸ í‚¤ì›Œë“œ (ê¸°ì¡´ + ì¶”ê°€)\n    const dietKeywords = ['ë‹¤ì´ì–´íŠ¸', 'ì €ì¹¼ë¡œë¦¬', 'ì‚´ë¹¼ê¸°', 'í—¬ì‹œ', 'ê±´ê°•'];\n    const hasDietKeyword = dietKeywords.some(keyword => description.toLowerCase().includes(keyword));\n    \n    // ë‹¤ì´ì–´íŠ¸ ë ˆì‹œí”¼ íŒì • (ë” ê´€ëŒ€í•˜ê²Œ)\n    if (isLowCalorie || isVegetableBased || isLightCooking || isSoupBased || hasDietKeyword) {\n      goals.push('weight_loss');\n    }\n    \n    // ğŸ’ª ê·¼ì„±ì¥ ë¶„ë¥˜ ë¡œì§ (ìŠ¤ë§ˆíŠ¸ ë¶„ë¥˜)\n    const isHighProtein = nutrition.protein > 20;\n    \n    // ë‹¨ë°±ì§ˆ ì¬ë£Œ í™•ì¸ (ë” í¬ê´„ì )\n    const proteinKeywords = ['ê³„ë€', 'ë‹¬ê±€', 'ë‹­', 'ì†Œê³ ê¸°', 'ë¼ì§€', 'ì—°ì–´', 'ì°¸ì¹˜', 'ë‘ë¶€', 'ìƒˆìš°', 'ì¡°ê°œ', 'ìƒì„ ', 'ìœ¡'];\n    const hasProteinSource = ingredients.some(ing => {\n      const ingName = ing.name.toLowerCase();\n      return proteinKeywords.some(protein => ingName.includes(protein));\n    });\n    \n    // ê³ ë‹¨ë°± ì¡°ë¦¬ë²•\n    const proteinCookingMethods = ['êµ½ê¸°', 'ë³¶ê¸°', 'íŠ€ê¸°ê¸°'];\n    const isProteinCooking = proteinCookingMethods.includes(cookingMethod);\n    \n    // ê·¼ì„±ì¥ í‚¤ì›Œë“œ\n    const muscleKeywords = ['ë‹¨ë°±ì§ˆ', 'ê·¼ìœ¡', 'ê³ ë‹¨ë°±', 'í”„ë¡œí‹´'];\n    const hasMuscleKeyword = muscleKeywords.some(keyword => description.toLowerCase().includes(keyword));\n    \n    // ê·¼ì„±ì¥ ë ˆì‹œí”¼ íŒì •\n    if (isHighProtein || hasProteinSource || isProteinCooking || hasMuscleKeyword) {\n      goals.push('muscle_gain');\n    }\n    \n    // ğŸ¥˜ ê· í˜• ì¡íŒ ì‹ë‹¨ (maintenance) - ëª¨ë“  ë ˆì‹œí”¼ê°€ ìµœì†Œ í•˜ë‚˜ì˜ ëª©í‘œë¥¼ ê°€ì§€ë„ë¡\n    if (goals.length === 0 || cookingMethod === 'êµ­/íƒ•' || mealPurpose === 'ì¼ìƒ') {\n      goals.push('maintenance');\n    }\n    \n    return goals;\n  }\n}\n\n// ğŸ›’ ì¿ íŒ¡ ìƒí’ˆ ë§¤ì¹­ê¸°\nclass CoupangProductMatcher {\n  private findMatchingProduct(ingredientName: string): CoupangProduct | null {\n    // ì¬ë£Œëª… â†’ ì¿ íŒ¡ ìƒí’ˆ ë§¤í•‘ í…Œì´ë¸”\n    const productMapping: Record<string, string> = {\n      'ê³„ë€': 'prod-whole-egg-1',\n      'ë‹¹ê·¼': 'prod-carrot-1',\n      'ì•Œë°°ê¸°ë°°ì¶”': 'prod-cabbage-1',\n      'ì•„ë³´ì¹´ë„': 'prod-avocado-1',\n      'í›ˆì œì—°ì–´': 'prod-salmon-1',\n      // ë” ë§ì€ ë§¤í•‘ ì¶”ê°€ ê°€ëŠ¥\n    };\n    \n    const productId = productMapping[ingredientName];\n    if (productId) {\n      return mockProducts.find(p => p.id === productId) || null;\n    }\n    \n    // ë¶€ë¶„ ë§¤ì¹˜ ë¡œì§\n    const partialMatch = mockProducts.find(product => \n      product.name.includes(ingredientName) || \n      ingredientName.includes(product.name.split(' ')[0])\n    );\n    \n    return partialMatch || null;\n  }\n  \n  matchIngredients(ingredients: Array<{name: string; quantity: number; unit: string}>): RecipeIngredient[] {\n    return ingredients.map(ingredient => {\n      const product = this.findMatchingProduct(ingredient.name);\n      \n      return {\n        product: product || this.createFallbackProduct(ingredient.name),\n        quantity: ingredient.quantity,\n        unit: ingredient.unit,\n        isOptional: false\n      };\n    });\n  }\n  \n  private createFallbackProduct(ingredientName: string): CoupangProduct {\n    // ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ì¬ë£Œì— ëŒ€í•œ ê¸°ë³¸ ìƒí’ˆ ìƒì„±\n    return {\n      id: `fallback-${ingredientName}`,\n      name: `${ingredientName} (ì¿ íŒ¡)`,\n      price: 3000, // ê¸°ë³¸ ê°€ê²©\n      imageUrl: 'https://via.placeholder.com/200x200?text=' + encodeURIComponent(ingredientName),\n      coupangUrl: 'https://www.coupang.com/search?q=' + encodeURIComponent(ingredientName),\n      category: 'ì‹ì¬ë£Œ',\n      nutrition: { calories: 50, carb: 10, protein: 2, fat: 1, sodium: 100, sugar: 0 },\n      description: `${ingredientName} ìƒí’ˆ`,\n      brand: 'ì¼ë°˜',\n      weight: '1ê°œ',\n      rating: 4.0,\n      reviewCount: 100,\n      isRocketDelivery: false\n    };\n  }\n}\n\n// ğŸ¯ ë©”ì¸ ë³€í™˜ê¸° í´ë˜ìŠ¤\nexport class MankaeRecipeProcessor {\n  private nutritionCalculator = new NutritionCalculator();\n  private goalClassifier = new GoalClassifier();\n  private productMatcher = new CoupangProductMatcher();\n  \n  // ì¬ë£Œ ë¬¸ìì—´ íŒŒì‹± (ì‹¤ì œ CSV í˜•ì‹ì— ë§ì¶˜ ì™„ì „ ê°œì„  ë²„ì „)\n  private parseIngredients(ingredientText: string): Array<{name: string; quantity: number; unit: string}> {\n    const ingredients: Array<{name: string; quantity: number; unit: string}> = [];\n\n    console.log(`ğŸ§ª ì¬ë£Œ íŒŒì‹± ì‹œì‘: \"${ingredientText.substring(0, 100)}...\"`);\n\n    if (!ingredientText || ingredientText.trim() === '') {\n      console.log(`âš ï¸ ì¬ë£Œ í…ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆìŒ`);\n      return ingredients;\n    }\n\n    // ì‹¤ì œ CSV í˜•ì‹ ì²˜ë¦¬: \"[ì¬ë£Œ] ë–¡êµ­ë–¡400g| ë‹¤ì§„ì†Œê³ ê¸°100g| ...\"\n    const sections = ingredientText.split(/\\[ì¬ë£Œ\\]|\\[ì–‘ë…\\]|\\[ì†ŒìŠ¤\\]|\\[ìœ¡ìˆ˜\\]|\\[ê°„ì¥ì–‘ë…\\]|\\[ì–‘ë…ì¥\\]|\\[ì–¼ê°ˆì´ë°ì¹ ë•Œ\\]|\\[ë§Œë‘ì „ê³¨ ìœ¡ìˆ˜\\]|\\[ì „ê³¨ìš”ë¦¬ ì–‘ë…ì¥\\]/);\n\n    sections.forEach((section, sectionIndex) => {\n      if (!section.trim()) return;\n\n      console.log(`ğŸ” ì„¹ì…˜ ${sectionIndex}: \"${section.substring(0, 50)}...\"`);\n\n      const items = section.split('|').filter(item => item.trim());\n      console.log(`ğŸ“ ì•„ì´í…œ ê°œìˆ˜: ${items.length}`);\n\n      items.forEach((item, itemIndex) => {\n        const trimmed = item.trim();\n        if (!trimmed || trimmed === 'ì•½ê°„' || trimmed.length < 2) return;\n\n        console.log(`ğŸ” ì•„ì´í…œ ${itemIndex}: \"${trimmed}\"`);\n\n        let match = null;\n\n        // ğŸ”¥ ì‹¤ì œ CSV ë°ì´í„° íŒ¨í„´ì— ì™„ë²½í•˜ê²Œ ë§ì¶˜ ì •ê·œì‹ë“¤\n\n        // 1. \"ë¼ì§€ê³ ê¸°ìˆ˜ìœ¡ìš©ì‚¼ê²¹ì‚´500g\" í˜•íƒœ (ê³µë°± ì—†ëŠ” ê¸´ ì´ë¦„ + ìˆ«ì + í•œê¸€ë‹¨ìœ„)\n        match = trimmed.match(/^(.+[ê°€-í£])(\\d+(?:\\/\\d+)?(?:\\.\\d+)?)([ê°€-í£]+)$/);\n\n        // 2. \"ë©¸ì¹˜ìœ¡ìˆ˜800ml\" í˜•íƒœ (ê³µë°± ì—†ëŠ” ì´ë¦„ + ìˆ«ì + ì˜ì–´ë‹¨ìœ„)\n        if (!match) {\n          match = trimmed.match(/^(.+[ê°€-í£])(\\d+(?:\\/\\d+)?(?:\\.\\d+)?)([a-zA-Z]+)$/);\n        }\n\n        // 3. \"ë¼ì§€ê³ ê¸° ìˆ˜ìœ¡ìš©ì‚¼ê²¹ì‚´500g\" í˜•íƒœ (ê³µë°± í¬í•¨ ê¸´ ì´ë¦„ + ìˆ«ì + í•œê¸€ë‹¨ìœ„)\n        if (!match) {\n          match = trimmed.match(/^(.+?)\\s+(\\d+(?:\\/\\d+)?(?:\\.\\d+)?)([ê°€-í£]+)$/);\n        }\n\n        // 4. \"ëœì¥1.5í°ìˆ \" í˜•íƒœ (ì†Œìˆ˜ì  + í•œê¸€ë‹¨ìœ„)\n        if (!match) {\n          match = trimmed.match(/^(.+?)(\\d+(?:\\.\\d+)?)([ê°€-í£]+)$/);\n        }\n\n        // 5. \"ëŒ€íŒŒ1/3ëŒ€\" í˜•íƒœ (ë¶„ìˆ˜ + í•œê¸€ë‹¨ìœ„)\n        if (!match) {\n          match = trimmed.match(/^(.+?)(\\d+\\/\\d+)([ê°€-í£]+)$/);\n        }\n\n        // 6. \"ì°¸ê¸°ë¦„1T\" í˜•íƒœ (ì˜ì–´ ë‹¨ìœ„)\n        if (!match) {\n          match = trimmed.match(/^(.+?)(\\d+(?:\\/\\d+)?(?:\\.\\d+)?)([TtLl])$/);\n        }\n\n        // 7. \"ì†Œê¸ˆ\" í˜•íƒœ (ì´ë¦„ë§Œ, ìˆ˜ëŸ‰ 1ë¡œ ì„¤ì •)\n        if (!match && trimmed.length > 1 && !trimmed.includes('ì•½ê°„')) {\n          match = [trimmed, trimmed, '1', 'ê°œ'];\n        }\n\n        if (match) {\n          const [, name, quantityStr, unit] = match;\n          let quantity = parseFloat(quantityStr);\n\n          // ë¶„ìˆ˜ ì²˜ë¦¬ (1/3 â†’ 0.333)\n          if (quantityStr.includes('/')) {\n            const [numerator, denominator] = quantityStr.split('/').map(Number);\n            quantity = numerator / denominator;\n          }\n\n          const ingredient = {\n            name: name.trim(),\n            quantity,\n            unit: unit.trim()\n          };\n\n          ingredients.push(ingredient);\n          console.log(`âœ… ì¬ë£Œ ì¶”ê°€: ${ingredient.name} ${ingredient.quantity}${ingredient.unit}`);\n        } else {\n          console.log(`âŒ ë§¤ì¹­ ì‹¤íŒ¨: \"${trimmed}\"`);\n\n          // ì‹¤íŒ¨í•œ ê²½ìš°ë¼ë„ ìœ íš¨í•œ ì¬ë£Œëª… ì¶”ì¶œ ì‹œë„\n          // ìˆ«ìì™€ ë‹¨ìœ„ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ë¥¼ ì¬ë£Œëª…ìœ¼ë¡œ ê°„ì£¼\n          const nameOnlyMatch = trimmed.match(/^(.+?)(?:\\d|\\s*$)/);\n          if (nameOnlyMatch && nameOnlyMatch[1].trim().length > 1 &&\n              !trimmed.includes('ì•½ê°„') && !trimmed.includes('ì ë‹¹íˆ')) {\n\n            const fallbackIngredient = {\n              name: nameOnlyMatch[1].trim(),\n              quantity: 1,\n              unit: 'ê°œ'\n            };\n            ingredients.push(fallbackIngredient);\n            console.log(`ğŸ”„ í´ë°± ì¬ë£Œ ì¶”ê°€: ${fallbackIngredient.name} ${fallbackIngredient.quantity}${fallbackIngredient.unit}`);\n          }\n        }\n      });\n    });\n\n    console.log(`ğŸ“‹ ìµœì¢… ì¬ë£Œ ê°œìˆ˜: ${ingredients.length}`);\n    return ingredients;\n  }\n  \n  // ì¡°ë¦¬ì‹œê°„ ë³€í™˜\n  private parseTime(timeStr: string): number {\n    // null/undefined ì²´í¬ ì¶”ê°€\n    if (!timeStr || typeof timeStr !== 'string') {\n      console.log('âš ï¸ ì¡°ë¦¬ì‹œê°„ ì •ë³´ê°€ ì—†ìŒ, ê¸°ë³¸ê°’ 30ë¶„ ì‚¬ìš©');\n      return 30; // ê¸°ë³¸ê°’ 30ë¶„\n    }\n\n    if (timeStr.includes('ì‹œê°„')) {\n      const hours = parseInt(timeStr) || 1;\n      return hours * 60;\n    }\n\n    const minutes = parseInt(timeStr) || 15;\n    return minutes;\n  }\n\n  // ğŸ§ª íŒŒì‹± í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ (ì„ì‹œ ë””ë²„ê¹…ìš©)\n  testParseIngredients(ingredientText: string): Array<{name: string; quantity: number; unit: string}> {\n    console.log('ğŸ§ª íŒŒì‹± í…ŒìŠ¤íŠ¸ ì‹œì‘:', ingredientText);\n    return this.parseIngredients(ingredientText);\n  }\n\n  // ğŸ”¥ ê¸´ê¸‰ ë””ë²„ê¹…: ì‹¤ì œ CSV ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸\n  debugRealDataParsing() {\n    const testData = [\n      \"[ì¬ë£Œ] ë–¡êµ­ë–¡400g| ë‹¤ì§„ì†Œê³ ê¸°100g| ë©¸ì¹˜ìœ¡ìˆ˜800ml| ëŒ€íŒŒ1/3ëŒ€| ê³„ë€2ê°œ| ì°¸ê¸°ë¦„1T| êµ­ê°„ì¥1T\",\n      \"[ì¬ë£Œ] ë¼ì§€ê³ ê¸° ìˆ˜ìœ¡ìš©ì‚¼ê²¹ì‚´500g| ëœì¥1.5í°ìˆ | ìˆ 4í°ìˆ | í™ì–´ë¬´ì¹¨| ë¬´ìƒì±„| ì½©ë‚˜ë¬¼ë¬´ì¹¨\",\n      \"[ì¬ë£Œ] ë°°ì¶”3ì¥| ì–‘íŒŒ1/2ê°œ| ëŒ€íŒŒ1ëŒ€| ì²­ì–‘ê³ ì¶”2ê°œ\"\n    ];\n\n    testData.forEach((data, index) => {\n      console.log(`\\nğŸ§ª í…ŒìŠ¤íŠ¸ ${index + 1}: ${data}`);\n      const result = this.parseIngredients(data);\n      console.log(`ğŸ“‹ ê²°ê³¼: ${result.length}ê°œ ì¬ë£Œ íŒŒì‹±ë¨`);\n      result.forEach((ing, i) => {\n        console.log(`   ${i + 1}. ${ing.name}: ${ing.quantity}${ing.unit}`);\n      });\n    });\n  }\n  \n  // ì¸ë¶„ìˆ˜ ë³€í™˜\n  private parseServings(servingStr: string): number {\n    if (!servingStr || typeof servingStr !== 'string') {\n      return 2; // ê¸°ë³¸ê°’ 2ì¸ë¶„\n    }\n    const match = servingStr.match(/(\\d+)/);\n    return match ? parseInt(match[1]) : 2;\n  }\n  \n  // ë‚œì´ë„ ë³€í™˜\n  private parseDifficulty(difficultyStr: string): 'easy' | 'medium' | 'hard' {\n    // null/undefined ì²´í¬ ì¶”ê°€\n    if (!difficultyStr || typeof difficultyStr !== 'string') {\n      console.log('âš ï¸ ë‚œì´ë„ ì •ë³´ê°€ ì—†ìŒ, ê¸°ë³¸ê°’ medium ì‚¬ìš©');\n      return 'medium'; // ê¸°ë³¸ê°’ medium\n    }\n\n    if (difficultyStr.includes('ì´ˆê¸‰') || difficultyStr.includes('ì•„ë¬´ë‚˜')) return 'easy';\n    if (difficultyStr.includes('ì¤‘ê¸‰')) return 'medium';\n    return 'hard';\n  }\n  \n  // ì‹ì‚¬ íƒ€ì… ì¶”ë¡ \n  private inferMealType(\n    title: string, \n    category: string, \n    mealPurpose: string\n  ): 'breakfast' | 'lunch' | 'dinner' | 'snack' {\n    // null/undefined ì²´í¬\n    const safeTitle = title || '';\n    const safeCategory = category || '';\n    const safeMealPurpose = mealPurpose || '';\n    \n    const titleLower = safeTitle.toLowerCase();\n    \n    if (titleLower.includes('ì•„ì¹¨') || safeMealPurpose === 'ì•„ì¹¨ëŒ€ìš©') return 'breakfast';\n    if (titleLower.includes('ì ì‹¬')) return 'lunch';\n    if (titleLower.includes('ì €ë…') || safeMealPurpose === 'ìˆ ì•ˆì£¼') return 'dinner';\n    if (safeCategory === 'ì–‘ë…/ì†ŒìŠ¤/ì¼' || safeMealPurpose === 'ê°„ì‹') return 'snack';\n    \n    // ê¸°ë³¸ê°’: ìš”ë¦¬ ì¢…ë¥˜ì— ë”°ë¼ ê²°ì •\n    if (safeCategory === 'êµ­/íƒ•') return 'dinner';\n    if (safeCategory === 'ë°‘ë°˜ì°¬') return 'lunch';\n    \n    return 'lunch'; // ê¸°ë³¸ê°’\n  }\n  \n  // í’ˆì§ˆ ì ìˆ˜ ê³„ì‚°\n  private calculateQualityScore(views: number, scraps: number): {\n    overall: number; taste: number; difficulty: number; nutrition: number; reviewCount: number;\n  } {\n    // ì¡°íšŒìˆ˜ ê¸°ë°˜ ì ìˆ˜ (ìµœëŒ€ 5.0)\n    const viewScore = Math.min((views / 200) * 5, 5.0);\n    \n    // ìŠ¤í¬ë©ìœ¨ ê¸°ë°˜ ì ìˆ˜ (ìµœëŒ€ 5.0)\n    const engagementRate = views > 0 ? (scraps / views) * 100 : 0;\n    const engagementScore = Math.min(engagementRate * 50, 5.0);\n    \n    // ì „ì²´ ì ìˆ˜ (ì¡°íšŒìˆ˜ 70% + ìŠ¤í¬ë©ìœ¨ 30%)\n    const overall = (viewScore * 0.7 + engagementScore * 0.3);\n    \n    return {\n      overall: Math.round(overall * 10) / 10,\n      taste: Math.min(overall + 0.2, 5.0),\n      difficulty: Math.min(overall + 0.1, 5.0),\n      nutrition: Math.min(overall - 0.1, 5.0),\n      reviewCount: views\n    };\n  }\n  \n  // ğŸ¯ ë©”ì¸ ë³€í™˜ í•¨ìˆ˜ (ì„±ëŠ¥ ìµœì í™”)\n  processRecipe(rawData: MankaeLRecipeRaw): Recipe {\n    // ğŸ”¥ ê¸´ê¸‰ ë””ë²„ê¹…: ëª¨ë“  ë ˆì‹œí”¼ ì²˜ë¦¬ ê³¼ì • ì¶”ì \n    console.log(`ğŸ”„ ë ˆì‹œí”¼ ì²˜ë¦¬ ì‹œì‘: ${rawData.RCP_TTL}`);\n    console.log(`   - ì›ë³¸ ì¬ë£Œ ë°ì´í„°: \"${rawData.CKG_MTRL_CN?.substring(0, 100)}...\"`);\n\n    // 1ë‹¨ê³„: ì¬ë£Œ íŒŒì‹±\n    const ingredients = this.parseIngredients(rawData.CKG_MTRL_CN || '');\n    console.log(`   - íŒŒì‹±ëœ ì¬ë£Œ ìˆ˜: ${ingredients.length}ê°œ`);\n\n    if (ingredients.length > 0) {\n      console.log(`   - ìƒ˜í”Œ ì¬ë£Œ: ${ingredients.slice(0, 3).map(i => `${i.name}(${i.quantity}${i.unit})`).join(', ')}`);\n    }\n\n    // 2ë‹¨ê³„: ì˜ì–‘ì†Œ ê³„ì‚° (ìºì‹œ í™œìš©)\n    const nutrition = this.nutritionCalculator.calculateNutrition(ingredients);\n    console.log(`   - ê³„ì‚°ëœ ì˜ì–‘ì†Œ: ${nutrition.calories}kcal, ${nutrition.protein}g ë‹¨ë°±ì§ˆ`);\n\n    // 3ë‹¨ê³„: ëª©í‘œ ë¶„ë¥˜ (ìµœì í™”ëœ ì•Œê³ ë¦¬ì¦˜)\n    const goalFit = this.goalClassifier.classifyRecipeGoals(\n      ingredients,\n      rawData.CKG_MTH_ACTO_NM || '',\n      rawData.CKG_STA_ACTO_NM || '',\n      rawData.CKG_IPDC || '',\n      nutrition\n    );\n\n    console.log(`   - ë¶„ë¥˜ëœ ëª©í‘œ: [${goalFit.join(', ')}]`);\n    console.log('---');\n\n    // 4ë‹¨ê³„: í’ˆì§ˆ í‰ê°€\n    const userRatings = this.calculateQualityScore(rawData.INQ_CNT || 0, rawData.SRAP_CNT || 0);\n\n    // 5ë‹¨ê³„: Recipe ê°ì²´ ìƒì„±\n    const recipe: Recipe = {\n      id: `mankae-${rawData.RCP_SNO}`,\n      name: rawData.CKG_NM || 'ì œëª© ì—†ìŒ',\n      description: rawData.CKG_IPDC || 'ì„¤ëª… ì—†ìŒ',\n      image: rawData.RCP_IMG_URL || `https://images.unsplash.com/photo-1546833999-b9f581a1996d?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3`, // ì‹¤ì œ ì´ë¯¸ì§€ ë˜ëŠ” ê¸°ë³¸ ì´ë¯¸ì§€\n      cookingTime: this.parseTime(rawData.CKG_TIME_NM || ''),\n      difficulty: this.parseDifficulty(rawData.CKG_DODF_NM || ''),\n      instructions: this.generateInstructions(rawData.CKG_MTH_ACTO_NM || '', ingredients),\n      tags: this.generateTags(rawData, nutrition),\n      mealType: this.inferMealType(rawData.RCP_TTL || '', rawData.CKG_KND_ACTO_NM || '', rawData.CKG_STA_ACTO_NM || ''),\n      goalFit,\n      \n      // í™•ì¥ ì •ë³´ (ì„ íƒì )\n      nutritionHighlights: {\n        mainBenefits: this.generateNutritionBenefits(ingredients, nutrition),\n        calorieContext: `${nutrition.calories}kcalë¡œ ê· í˜•ì¡íŒ í•œ ë¼`,\n        dietaryInfo: this.generateDietaryInfo(ingredients, nutrition)\n      },\n      \n      userRatings,\n      \n      sourceInfo: {\n        chef: rawData.RGTR_NM,\n        source: 'chef_recipe',\n        verified: rawData.INQ_CNT > 100, // ì¡°íšŒìˆ˜ 100 ì´ìƒì´ë©´ ê²€ì¦ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼\n        lastUpdated: rawData.FIRST_REG_DT.substring(0, 8) // YYYYMMDD í˜•ì‹\n      }\n    };\n    \n    console.log(`âœ… ë³€í™˜ ì™„ë£Œ: ${recipe.name}`);\n    return recipe;\n  }\n  \n  // ì¡°ë¦¬ë²• ìƒì„±\n  private generateInstructions(cookingMethod: string, ingredients: Array<{name: string; quantity: number; unit: string}>): string[] {\n    const baseInstructions: Record<string, string[]> = {\n      'ë¶€ì¹¨': [\n        'íŒ¬ì— ê¸°ë¦„ì„ ë‘ë¥´ê³  ì¤‘ì•½ë¶ˆë¡œ ë‹¬ê¶ˆì£¼ì„¸ìš”',\n        'ì¬ë£Œë¥¼ ì˜¬ë¦¬ê³  ë…¸ë¦‡í•˜ê²Œ ë¶€ì³ì£¼ì„¸ìš”',\n        'ë’¤ì§‘ì–´ì„œ ë°˜ëŒ€ë©´ë„ ìµí˜€ì£¼ì„¸ìš”',\n        'ì™„ì„±ëœ ìš”ë¦¬ë¥¼ ì ‘ì‹œì— ë‹´ì•„ì£¼ì„¸ìš”'\n      ],\n      'ë³¶ìŒ': [\n        'íŒ¬ì„ ë‹¬êµ¬ê³  ê¸°ë¦„ì„ ë‘ë¥´ì„¸ìš”',\n        'ì¬ë£Œë¥¼ ë„£ê³  ì„¼ ë¶ˆì—ì„œ ë¹ ë¥´ê²Œ ë³¶ì•„ì£¼ì„¸ìš”',\n        'ì–‘ë…ì„ ë„£ê³  ê³¨ê³ ë£¨ ì„ì–´ì£¼ì„¸ìš”',\n        'ë¶ˆì„ ë„ê³  ì ‘ì‹œì— ë‹´ì•„ ì™„ì„±í•˜ì„¸ìš”'\n      ],\n      'ì°œ': [\n        'ì¬ë£Œë¥¼ ê¹¨ë—ì´ ì†ì§ˆí•˜ì—¬ ì¤€ë¹„í•˜ì„¸ìš”',\n        'ì°œê¸°ì— ë¬¼ì„ ë„£ê³  ë“ì—¬ì£¼ì„¸ìš”',\n        'ì¬ë£Œë¥¼ ì°œê¸°ì— ì˜¬ë¦¬ê³  ëšœê»‘ì„ ë®ì–´ì£¼ì„¸ìš”',\n        'ì¶©ë¶„íˆ ìµìœ¼ë©´ ì–‘ë…ê³¼ í•¨ê»˜ ì™„ì„±í•˜ì„¸ìš”'\n      ],\n      'ë“ì´ê¸°': [\n        'ëƒ„ë¹„ì— ë¬¼ì„ ë„£ê³  ë“ì—¬ì£¼ì„¸ìš”',\n        'ì¬ë£Œë¥¼ ë„£ê³  ì¤‘ë¶ˆì—ì„œ ë“ì—¬ì£¼ì„¸ìš”',\n        'ê°„ì„ ë§ì¶”ê³  ë” ë“ì—¬ì£¼ì„¸ìš”',\n        'ê·¸ë¦‡ì— ë‹´ì•„ ëœ¨ê²ê²Œ ì™„ì„±í•˜ì„¸ìš”'\n      ]\n    };\n    \n    return baseInstructions[cookingMethod] || [\n      'ì¬ë£Œë¥¼ ì¤€ë¹„í•˜ê³  ì†ì§ˆí•˜ì„¸ìš”',\n      'ì ì ˆí•œ ë°©ë²•ìœ¼ë¡œ ì¡°ë¦¬í•˜ì„¸ìš”',\n      'ê°„ì„ ë§ì¶”ê³  ì™„ì„±í•˜ì„¸ìš”'\n    ];\n  }\n  \n  // íƒœê·¸ ìƒì„±\n  private generateTags(rawData: MankaeLRecipeRaw, nutrition: {calories: number; protein: number}): string[] {\n    const tags: string[] = [];\n    \n    // ì¡°ë¦¬ë²• ê¸°ë°˜ - null ì²´í¬\n    if (rawData.CKG_MTH_ACTO_NM) {\n      tags.push(rawData.CKG_MTH_ACTO_NM);\n    }\n    \n    // ì˜ì–‘ ê¸°ë°˜\n    if (nutrition.protein > 15) tags.push('ê³ ë‹¨ë°±');\n    if (nutrition.calories < 200) tags.push('ì €ì¹¼ë¡œë¦¬');\n    \n    // ìƒí™© ê¸°ë°˜ - null ì²´í¬\n    if (rawData.CKG_STA_ACTO_NM === 'ì´ˆìŠ¤í”¼ë“œ') tags.push('ê°„í¸');\n    if (rawData.CKG_DODF_NM === 'ì•„ë¬´ë‚˜') tags.push('ì´ˆë³´ì');\n    \n    // ì‹œê°„ ê¸°ë°˜ - null ì²´í¬\n    if (rawData.CKG_TIME_NM && rawData.CKG_TIME_NM.includes('10ë¶„')) tags.push('10ë¶„ì™„ì„±');\n    if (rawData.CKG_TIME_NM && rawData.CKG_TIME_NM.includes('15ë¶„')) tags.push('15ë¶„ì™„ì„±');\n    \n    return tags;\n  }\n  \n  // ì˜ì–‘ í˜œíƒ ìƒì„±\n  private generateNutritionBenefits(\n    ingredients: Array<{name: string}>, \n    nutrition: {protein: number; calories: number}\n  ): string[] {\n    const benefits: string[] = [];\n    \n    if (nutrition.protein > 15) {\n      benefits.push(`ê³ ë‹¨ë°±ì§ˆ(${nutrition.protein}g)ë¡œ ê·¼ìœ¡ ê±´ê°•ì— ë„ì›€`);\n    }\n    \n    ingredients.forEach(ing => {\n      if (ing.name === 'ê³„ë€') benefits.push('ì™„ì „ë‹¨ë°±ì§ˆê³¼ ë¹„íƒ€ë¯¼ ê³µê¸‰');\n      if (ing.name === 'ë°°ì¶”') benefits.push('ì‹ì´ì„¬ìœ ì™€ ë¹„íƒ€ë¯¼C í’ë¶€');\n      if (ing.name === 'ì•„ë³´ì¹´ë„') benefits.push('ê±´ê°•í•œ ë¶ˆí¬í™”ì§€ë°©ì‚° í•¨ìœ ');\n    });\n    \n    return benefits;\n  }\n  \n  // ì‹ë‹¨ ì •ë³´ ìƒì„±\n  private generateDietaryInfo(\n    ingredients: Array<{name: string}>, \n    nutrition: {calories: number; protein: number}\n  ): ('ê¸€ë£¨í…í”„ë¦¬' | 'ì €íƒ„ìˆ˜í™”ë¬¼' | 'ê³ ë‹¨ë°±' | 'ì €ì§€ë°©' | 'ë¹„ê±´' | 'ì¼€í† ' | 'ì €ì¹¼ë¡œë¦¬')[] {\n    const info: ('ê¸€ë£¨í…í”„ë¦¬' | 'ì €íƒ„ìˆ˜í™”ë¬¼' | 'ê³ ë‹¨ë°±' | 'ì €ì§€ë°©' | 'ë¹„ê±´' | 'ì¼€í† ' | 'ì €ì¹¼ë¡œë¦¬')[] = [];\n    \n    if (nutrition.protein > 15) info.push('ê³ ë‹¨ë°±');\n    if (nutrition.calories < 200) info.push('ì €ì¹¼ë¡œë¦¬');\n    \n    const hasAnimalProducts = ingredients.some(ing => \n      ['ê³„ë€', 'ìš°ì‚¼ê²¹', 'í›ˆì œì—°ì–´'].includes(ing.name)\n    );\n    if (!hasAnimalProducts) info.push('ë¹„ê±´');\n    \n    return info;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}